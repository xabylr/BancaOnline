<!DOCTYPE html>
<!--
To change this license header, choose License Headers in Project Properties.
To change this template file, choose Tools | Templates
and open the template in the editor.
-->
<html>
    <head>
        <title>Ruleta</title>
        <script src="res/TweenMax.min.js" type="text/javascript"></script>
        <script src="res/Winwheel.min.js" type="text/javascript"></script>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
    </head>
    <body>
        <input type="button" value="girar" onclick="miRuleta.startAnimation();"/>
        <br/>
        <br/>
        <canvas id="canvas" height="400" width="400"></canvas>
        <script>
            var miRuleta = new Winwheel({
                'numSegments' : 5,
                'outerRadius' : 170,
                'segments' : [
                    {'fillStyle' : '#f1c40f', 'text' : 'Pierdes 100€'},
                    {'fillStyle' : '#2ecc71', 'text' : 'Pierdes 100€'},
                    {'fillStyle' : '#e67e22', 'text' : 'Pierdes 100€'},
                    {'fillStyle' : '#e74c3c', 'text' : 'Pierdes 100€'},
                    {'fillStyle' : '#8e44ad', 'text' : 'Pierdes 100€'},
                ],
                'animation' : {
                    'type' : 'spinToStop',
                    'duration' : 5,
                    'callbackFinished' : 'Mensaje()',
                    'callbackAfter' : 'dibujarIndicador()',
                }
            });
            
            
            function Mensaje() {
           var SegmentoSeleccionado = miRuleta.getIndicatedSegment();
           alert(SegmentoSeleccionado.text + "!");
           //Reinicio de la ruleta
           miRuleta.stopAnimation(false);
           miRuleta.rotationAngle = 0;
           miRuleta.draw();
           dibujarIndicador();
       }
            
            dibujarIndicador();
            function dibujarIndicador() {
            var ctx = miRuleta.ctx;
            ctx.strokeStyle = 'navy';     
            ctx.fillStyle = 'black';     
            ctx.lineWidth = 2;
            ctx.beginPath();             
            ctx.moveTo(170, 0);          
            ctx.lineTo(230, 0);          
            ctx.lineTo(200, 40);
            ctx.lineTo(171, 0);
            ctx.stroke();                
            ctx.fill();                  
       }
        </script>
    </body>
</html>
